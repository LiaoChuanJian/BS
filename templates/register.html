<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>注册</title>
    <!-- 样式文件 -->
    <link rel="stylesheet" href="/static/component/pear/css/pear.css" />
    <link rel="stylesheet" href="/static/admin/css/other/login.css" />
</head>
<!-- 代码结构 -->
<body background="/static/admin/images/background.svg" style="background-size: cover;">
    <form class="layui-form" action="/accounts/register" method="post" onsubmit="return validateForm()">
        {% csrf_token %}
        <div class="layui-form-item">
            <img class="logo" src="/static/admin/images/logo.png" />
            <div class="title">注册</div>
        </div>
        <div class="layui-form-item">
            <input id="username" name="username" placeholder="用户名" class="layui-input" value="{{ dict1.username }}" required />
            <div class="error-message" id="username-error" style="color:red; display:none;">用户名必须唯一且不超过20个字符。</div>
        </div>
        <div class="layui-form-item">
            <input id="mobile" name="mobile" placeholder="手机" class="layui-input" value="{{ dict1.mobile }}" required />
            <div class="error-message" id="mobile-error" style="color:red; display:none;">请输入有效的手机号码。</div>
        </div>
        <div class="layui-form-item">
            <input id="email" name="email" placeholder="邮箱" class="layui-input" value="{{ dict1.email }}" required />
            <div class="error-message" id="email-error" style="color:red; display:none;">请输入有效的邮箱地址。</div>
        </div>
        <div class="layui-form-item">
            <input id="password" type="password" name="password" placeholder="密码" class="layui-input" required />
            <div class="error-message" id="password-error" style="color:red; display:none;">密码长度必须至少为6个字符。</div>
        </div>
        <div class="layui-form-item">
            <input id="password2" type="password" name="password2" placeholder="再次输入密码" class="layui-input" required />
            <div class="error-message" id="password2-error" style="color:red; display:none;">两次密码输入不一致。</div>
        </div>

        <div class="layui-form-item">
            <button type="submit" class="pear-btn pear-btn-success login" lay-submit lay-filter="login">注册</button>
        </div>
        <div class="layui-form-item">
            <button type="button" class="pear-btn pear-btn-success login" lay-submit lay-filter="login" onclick="goReguster()">登录</button>
        </div>
    </form>
    <!-- 资源引入 -->
    <script src="/static/component/layui/layui.js"></script>
    <script src="/static/component/pear/pear.js"></script>
    <script>
        function validateForm() {
            // 重置错误消息
            document.getElementById("username-error").style.display = "none";
            document.getElementById("mobile-error").style.display = "none";
            document.getElementById("email-error").style.display = "none";
            document.getElementById("password-error").style.display = "none";
            document.getElementById("password2-error").style.display = "none";

            // 获取输入值
            const username = document.getElementById("username").value;
            const mobile = document.getElementById("mobile").value;
            const email = document.getElementById("email").value;
            const password = document.getElementById("password").value;
            const password2 = document.getElementById("password2").value;

            // 验证用户名
            if (username.length > 20) {
                document.getElementById("username-error").style.display = "block";
                return false;
            }

            // 验证手机格式（示例）
            const mobileRegex = /^[1][3-9][0-9]{9}$/; // 简单的手机号格式
            if (!mobileRegex.test(mobile)) {
                document.getElementById("mobile-error").style.display = "block";
                return false;
            }

            // 验证邮箱格式
            const emailRegex = /^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/;
            if (!emailRegex.test(email)) {
                document.getElementById("email-error").style.display = "block";
                return false;
            }

            // 验证密码长度
            if (password.length < 6) {
                document.getElementById("password-error").style.display = "block";
                return false;
            }

            // 验证两次输入的密码是否一致
            if (password !== password2) {
                document.getElementById("password2-error").style.display = "block";
                return false;
            }

            return true; // 验证通过
        }

        function goReguster() {
            window.location.href = "/accounts/login"; // 跳转到登录页面
        }
    </script>
</body>
</html>
